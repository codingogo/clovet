<%= link_to "Home", root_path %>

  <div id="viewport">
    <ul class="stack" id="img-source">
      <li class="spades">
         <img src="<%= @item.image_url400 %>" alt="">
          
          <div class="yes"></div>
          <div class="no"></div>
      </li>
    </ul>
  </div>  

<%= @item.name %>


<%= form_tag create_history_path, :method => 'post', :id => "liked" do %>
<%= hidden_field_tag 'item_id', @item.id %>
<%= hidden_field_tag 'liked', 'true'  %>
<%= hidden_field_tag 'clicked_through', 'false'  %>
<%= hidden_field_tag 'next_item', @next_item.id  %>
<%= submit_tag 'liked' %>
<% end %>


<%= form_tag create_history_path, :method => 'post', :id => "disliked" do %>
<%= hidden_field_tag 'item_id', @item.id %>
<%= hidden_field_tag 'liked', 'false'  %>
<%= hidden_field_tag 'clicked_through', 'false'  %>
<%= hidden_field_tag 'next_item', @next_item.id  %>
<%= submit_tag 'disliked' %>
<% end %>

<%= form_tag('/create_history', :method => 'post') do %>
<%= hidden_field_tag 'item_id', @item.id %>
<%= hidden_field_tag 'liked', 'true'  %>
<%= hidden_field_tag 'clicked_through', 'true'  %>
<%= hidden_field_tag 'next_item', @next_item.id  %>
<%= submit_tag 'buy' %>
<% end %>







<script>
  
var swingIt = function(){

    var stack = gajus.Swing.Stack(),
        cardElement = document.querySelector('.stack li'),
        throwOutConfidenceBind = document.querySelector('#throw-out-confidence-bind'),
        directionBind = document.querySelector('#direction-bind'),
        throwOutConfidenceElements = {};

    window.card = stack.createCard(cardElement);

    stack.on('dragstart', function (e) {
        throwOutConfidenceElements.yes = e.target.querySelector('.yes').style;
        throwOutConfidenceElements.no = e.target.querySelector('.no').style;
    });

    stack.on('dragmove', function (e) {
        throwOutConfidenceElements[e.throwDirection == gajus.Swing.Card.DIRECTION_RIGHT ? 'yes' : 'no'].opacity = e.throwOutConfidence;
    });

    stack.on('dragend', function (e) {
        if (e.throwOutConfidence != 1) {
            throwOutConfidenceElements.yes.opacity = 0;
            throwOutConfidenceElements.no.opacity = 0;
        }
    });


    stack.on('throwoutleft', function() {
      $("#disliked").submit()
    });

    stack.on('throwoutright', function(){
      $('#liked').submit()
    })
    
}; // ends swingIt


    swingIt();


</script>

