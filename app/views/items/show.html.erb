<%= link_to "Home", root_path %>

  <div id="viewport">
    <ul class="stack" id="img-source">
      <li class="spades">
         <img src="<%= @item.image_url400 %>" alt="">
          
          <div class="yes"></div>
          <div class="no"></div>
      </li>
    </ul>
  </div>  

<%= @item.name %>


<%= form_tag('/create_history', :method => 'post') do %>
<%= hidden_field_tag 'item_id', @item.id %>
<%= hidden_field_tag 'liked', 'true'  %>
<%= hidden_field_tag 'clicked_through', 'false'  %>
<%= hidden_field_tag 'next_item', @next_item.id  %>
<%= submit_tag 'liked' %>
<% end %>


<%= form_tag('/create_history', :method => 'post') do %>
<%= hidden_field_tag 'item_id', @item.id %>
<%= hidden_field_tag 'liked', 'false'  %>
<%= hidden_field_tag 'clicked_through', 'false'  %>
<%= hidden_field_tag 'next_item', @next_item.id  %>
<%= submit_tag 'disliked' %>
<% end %>

<%= form_tag('/create_history', :method => 'post') do %>
<%= hidden_field_tag 'item_id', @item.id %>
<%= hidden_field_tag 'liked', 'true'  %>
<%= hidden_field_tag 'clicked_through', 'true'  %>
<%= hidden_field_tag 'next_item', @next_item.id  %>
<%= submit_tag 'buy' %>
<% end %>





<script>

$(document).ready(function(){
  var $imgSource = $('#img-source');
  var $likeBtn = $('#like-btn');
  var $dislikeBtn = $('#dislike-btn');
  
  // when imgSource starts moving check 
  $imgSource.on('click', 'li', function(){
    window.location = '/items/' + (Math.floor((Math.random() * 100) + 1))

  // ****** if the imgSource is swiped left submit form A
  
  // ****** if the imgSource is swiped right submit form B  
  });

})  

</script>
  


<script>
  
var swingIt = function(){

  // querySelector means $('.stack li')
    var stack = gajus.Swing.Stack(),
        cardElement = document.querySelector('.stack li'),
        throwOutConfidenceBind = document.querySelector('#throw-out-confidence-bind'),
        directionBind = document.querySelector('#direction-bind'),
        throwOutConfidenceElements = {};

    window.card = stack.createCard(cardElement);

    stack.on('dragstart', function (e) {
        throwOutConfidenceElements.yes = e.target.querySelector('.yes').style;
        throwOutConfidenceElements.no = e.target.querySelector('.no').style;
    });

    stack.on('dragmove', function (e) {
        throwOutConfidenceElements[e.throwDirection == gajus.Swing.Card.DIRECTION_RIGHT ? 'yes' : 'no'].opacity = e.throwOutConfidence;

        // throwOutConfidenceBind.innerHTML = e.throwOutConfidence.toFixed(3);
        // directionBind.innerHTML = e.throwDirection == gajus.Swing.Card.DIRECTION_RIGHT ? 'right' : 'left';
    });

    stack.on('dragend', function (e) {
        if (e.throwOutConfidence != 1) {
            throwOutConfidenceElements.yes.opacity = 0;
            throwOutConfidenceElements.no.opacity = 0;
        }
    });
  };


    swingIt();


</script>

